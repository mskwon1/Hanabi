package board;

import java.util.ArrayList;
import java.util.Stack;

import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter.DEFAULT;

import entity.Card;
import entity.Color;

public class Deck {
	private Stack<Card> cards;
	private int count;
	
	public Deck() {
		ArrayList<Card> DEFAULT_CARDS = new ArrayList<Card>();
		Color[] colors = {
				Color.valueOf("RED"),
				Color.valueOf("BLUE"),
				Color.valueOf("GREEN"),
				Color.valueOf("WHITE"),
				Color.valueOf("BLACK")
		};
		
		for (Color color : colors) {
			for (int i=0;i<3;i++) {
				DEFAULT_CARDS.add(new Card(1,color));
				
				if (i>0) {
					DEFAULT_CARDS.add(new Card(2,color));
					DEFAULT_CARDS.add(new Card(3,color));
					DEFAULT_CARDS.add(new Card(4,color));
				}
				
				if (i>1) {
					DEFAULT_CARDS.add(new Card(5,color));
				}
			}
		}
		
		this.count = 0;
	}
	
	public int getCount() {
		return this.count;
	}
	
	public Card getTopCard() {
		count--;
		return cards.pop();
	}
	
	public void shuffle() {
		ArrayList<Card> tempCards = new ArrayList<Card>();
		
		// 덱에 있는 카드를 tempCard에 옮기고
		while (!cards.isEmpty()) {
			tempCards.add(cards.pop());
		}
		
		// 랜덤 인덱스를 push
		while (!tempCards.isEmpty()) {
			int index = (int)(Math.random()*tempCards.size());
			cards.push(tempCards.remove(index));
		}
	}
	
	public void putCards(ArrayList<Card> newCards) {
		cards.addAll(newCards);
		this.count += newCards.size();
		
		shuffle();
	}
	
	public static void main(String[] args) {
		Deck testDeck = new Deck();
		ArrayList<Card> testCards = new ArrayList<Card>();
		
		for (int i=0;i<5;i++) {
			testCards.add(new Card(i,Color.valueOf("RED")));
		}
		
		testDeck.putCards(testCards);
		
		while (testDeck.getCount()>0) {
			System.out.println(testDeck.getTopCard());
		}
	}
}
